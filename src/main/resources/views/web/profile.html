<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
<meta charset="UTF-8">
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <link type="text/css" rel="stylesheet" th:href="@{/font/fontawesome/css/all.css}"/>
   <link type="text/css" rel="stylesheet" th:href="@{/css/owl.carousel.min.css}"/>
   <link type="text/css" rel="stylesheet" th:href="@{/css/owl.theme.default.min.css}"/>
   <link type="text/css" rel="stylesheet" th:href="@{/bootstrap/css/bootstrap.min.css}"/>
   <link type="text/css" rel="stylesheet" th:href="@{/css/base.css}"/>
   <link type="text/css" rel="stylesheet" th:href="@{/css/index.css}"/>
   <link type="text/css" rel="stylesheet" th:href="@{/css/responsive.css}"/>
   <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
   <title>Trang chủ</title>
</head>
<body class="account-register">
   <header th:replace="fragment::header"></header>
   
   <section class="bread_crumb py-4">
        <div class="container">
            <div class="row">
                <div class="col-sm-12">
                    <ul class="breadcrumb">
                        <li>
                            <a th:href="@{/freshfood/trang-chu}"><span ><i class="fa fa-home"></i> Trang chủ</span></a>
                            <span><i class="fa fa-angle-right"></i></span>
                        </li>
                        <li>
                            <a th:href="@{/freshfood/dang-nhap}"> <span>Tài khoản</span></a>
                            <span><i class="fa fa-angle-right"></i></span>
                        </li>
                        <li>
                            <a th:href="@{/freshfood/dang-ki}"> <strong>[[${user.email}]]</strong></a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
   </section>      
   
    <section>
        <section class="page mb-4">
            <div class="policy d-flex justify-content-around" id="header-service-0" style="background-image: none;">
                <div class="item-policy d-flex align-items-center">
                    <a href="javascript:void(0)">
                        <img th:src="@{/image/services/policy1-0x0.png}" alt="Miễn phí vận chuyển" class="fa" />
                    </a>
                    <div class="info">
                        <a href="javascript:void(0)"> Miễn phí vận chuyển</a>
                        <p>
                            <p>B&aacute;n k&iacute;nh 5 km</p>
                        </p>
                    </div>
                </div>
                <div class="item-policy d-flex align-items-center">
                    <a href="javascript:void(0)">
                        <img th:src="@{/image/services/policy2-0x0.png}" alt="Hỗ trợ 24/7" class="fa" />
                    </a>
                    <div class="info">
                        <a href="javascript:void(0)">Hỗ trợ 24/7</a>
                        <p>
                            <p>Hotline:&nbsp;<a href="callto:19001009">035 2399 340</a></p>
                        </p>
                    </div>
                </div>
                <div class="item-policy d-flex align-items-center">
                    <a href="javascript:void(0)">
                        <img th:src="@{/image/services/policy3-0x0.png}" alt="Giờ làm việc" class="fa" />
                    </a>
                    <div class="info">
                        <a href="javascript:void(0)"> Giờ làm việc</a>
                        <p>
                            <p>8:00 - 22:00</p>
                        </p>
                    </div>
                </div>
            </div>
            <script type="text/javascript">
                $('.header .header-content .header-service').append($('#header-service-0'));
            </script>
            <div class="container">
                <div class="row">
                    <div class="clearfix"></div>
                    <div class="alert alert-danger mb-4 col-sm-12 col-xs-12 col-md-12" th:if="${alert != null}">
                        <i class="fa fa-exclamation-circle"></i>
                        <sapn>[[${alert}]]</sapn>
                    </div>
                    <div id="content" class="col-sm-12 col-xs-12 col-md-12">
                        <h3>User: [[${user.fullname}]]</h3>
                        <form th:action="@{/freshfood/dang-ki}" th:object="${user}" method="POST" enctype="multipart/form-data" class="form-horizontal">
                            <fieldset id="account">
                                <legend>Chi tiết tài khoản</legend>
                                <div class="form-group required" style="display: none">
                                    <label class="col-sm-2 control-label">Nhóm Khách hàng</label>
                                    <div class="col-sm-10">
                                        <div class="rodio">
                                            <label>
                                                <input type="type="radio" name="customer_group_id" value="1" checked="checked""/>
                                                Mặc định
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group required row">
                                    <label th:class="${#fields.hasErrors('fullname')?'col-sm-12 col-md-2 control-label text-lg-right text-danger':'col-sm-12 col-md-2 control-label text-lg-right'}"  for="input-firstname">Họ và Tên</label>
                                    <div class="col-sm-12 col-md-10">
                                        <input th:field="*{fullname}" type="text" name="firstname" value="" placeholder="Họ & Tên đệm" id="input-firstname" class="form-control" />
                                        <div class="text-danger" th:if="${#fields.hasErrors('fullname')}" th:errors="*{fullname}"></div>
                                    </div>
                                </div>
                                <div class="form-group required row">
                                    <label th:class="${#fields.hasErrors('fullname')?'col-sm-12 col-md-2 control-label text-lg-right text-danger':'col-sm-12 col-md-2 control-label text-lg-right'}" for="input-email">Email</label>
                                    <div class="col-sm-12 col-md-10">
                                        <input th:field="*{email}" type="email" name="email" value="" placeholder="Email" id="input-email" class="form-control" />
                                        <div class="text-danger" th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></div>
                                    </div>
                                </div>
                                <div class="form-group required row">
                                    <label th:class="${#fields.hasErrors('fullname')?'col-sm-12 col-md-2 control-label text-lg-right text-danger':'col-sm-12 col-md-2 control-label text-lg-right'}" for="input-telephone">Điện thoại</label>
                                    <div class="col-sm-12 col-md-10">
                                        <input th:field="*{phone}" type="tel" name="telephone" value="" placeholder="Điện thoại" id="input-telephone" class="form-control" />
                                        <div class="text-danger" th:if="${#fields.hasErrors('phone')}" th:errors="*{phone}"></div>
                                    </div>
                                </div>
                                <div class="form-group required row">
                                    <label class="col-sm-12 col-md-2 control-label text-lg-right" for="input-fax">Số Fax</label>
                                    <div class="col-sm-12 col-md-10">
                                        <input th:field="*{fax}" type="text" name="fax" value="" placeholder="Số Fax" id="input-fax" class="form-control" />
                                    </div>
                                </div>
                            </fieldset>
                            <fieldset id="address">
                                <legend>Địa chỉ</legend>
                                <div class="form-group row">
                                    <label class="col-sm-12 col-md-2 control-label text-lg-right"  for="input-company">Công ty</label>
                                    <div class="col-sm-12 col-md-10">
                                        <input type="text" name="company" value="" placeholder="Công ty" id="input-company" class="form-control" />
                                    </div>
                                </div>
                                <div class="form-group required row">
                                    <label th:class="${#fields.hasErrors('fullname')?'col-sm-12 col-md-2 control-label text-lg-right text-danger':'col-sm-12 col-md-2 control-label text-lg-right'}" for="input-address">Địa chỉ</label>
                                    <div class="col-sm-12 col-md-10">
                                        <input th:field="*{address}" type="text" name="address" value="" placeholder="Địa chỉ" id="input-address" class="form-control" />
                                        <div class="text-danger" th:if="${#fields.hasErrors('address')}" th:errors="*{address}"></div>
                                    </div>
                                </div>
                                <div class="form-group required row">
                                    <label class="col-sm-12 col-md-2 control-label text-lg-right" for="input-city">Quận / Huyện</label>
                                    <div class="col-sm-12 col-md-10">
                                        <input th:field="*{province}" type="text" name="city" value="" placeholder="Quận / Huyện" id="input-city" class="form-control" />
                                    </div>
                                </div>
                                <div class="form-group required row">
                                    <label th:class="${#fields.hasErrors('fullname')?'col-sm-12 col-md-2 control-label text-lg-right text-danger':'col-sm-12 col-md-2 control-label text-lg-right'}" for="input-country">Quốc gia</label>
                                    <div class="col-sm-12 col-md-10">
                                        <select name="country_id" id="input-country" class="form-control">
                                            <option value=""> --- Chọn --- </option>
                                            <option th:each="i:${country}" th:value="${i.id}">[[${i.name}]]</option>
                                        </select>  
                                        <div class="text-danger" th:if="${#fields.hasErrors('country')}" th:errors="*{country}"></div>
                                    </div>                                                                                                                                                                                             
                                </div>
                                <div class="form-group required row">
                                    <label th:class="${#fields.hasErrors('fullname')?'col-sm-12 col-md-2 control-label text-lg-right text-danger':'col-sm-12 col-md-2 control-label text-lg-right'}" for="input-zone">Tỉnh / TP</label>
                                    <div class="col-sm-12 col-md-10">
                                        <select name="zone_id" id="input-zone" class="form-control">
                                            <option value=""> --- Chọn --- </option>
                                        </select>
                                        <div class="text-danger" th:if="${#fields.hasErrors('city')}" th:errors="*{city}"></div>
                                    </div>
                                </div>
                            </fieldset>
                           
                            <fieldset class="mb-3">
                                <legend>Đăng ký nhận tin</legend>
                                <div class="form-group row">
                                    <label class="col-sm-12 col-md-2 text-lg-right control-label">Đăng ký nhận tin</label>
                                    <div class="col-sm-12 col-md-10">
                                        <label class="radio-inline">
                                            <input type="radio" name="newsletter" value="1" />
                                            Có
                                        </label>
                                        <label class="radio-inline">
                                            <input type="radio" name="newsletter" value="0" checked="checked" />
                                            Không
                                        </label>
                                    </div>
                                </div>
                            </fieldset>
                            <div class="button">
                                <div class="float-right">
                                    <input type="submit" value="Tiếp tục" class="btn btn-primary" />
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>   
        </section>
          <script>
            $("select[name='country_id']").change(function(){
            	$.ajax({
            		url: '/freshfood/api/city?id='+this.value,
            		dataType  : 'json',
            		beforeSend: function () {
                        $("select[name='country_id']").after("<i class='fa fa-circle-o-notch fa-spin'></i>");
                    },
                    complete: function () {
                        $(".fa-spin").remove();
                    },
                    success: function(json){
                    	html='<option value="">---Trống---</option>';
                    	$.each(json, function(index, c){
                    		html += '<option value="'+c.name+'">'+c.name+'</option>';
                    		// c là tên của mảng truyền trả về trong api
                    	});
                    	$('select[name="zone_id"]').html(html);
                    },
                    error: function(){
                    	alert("không tìm đc city !")
                    }
            	});
            });
        </script>
        <section th:replace="fragment::footer-nav"></section> 
    </section>
       
   <footer th:replace="fragment::footer"></footer>
    
   <script type="text/javascript" th:src="@{/js/owl.carousel.min.js}"></script> 
   <script type="text/javascript" th:src="@{/bootstrap/js/bootstrap.min.js}"></script>          
   <script type="text/javascript" th:src="@{/js/all.js}"></script>          
   <script type="text/javascript" th:src="@{/js/index.js}"></script>     
</body>
</html>