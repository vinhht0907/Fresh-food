<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
   <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
   <meta charset="utf-8" />
   <meta name="description" content="overview &amp; stats" />
   <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />

	<link rel="stylesheet" th:href="@{/assets/css/bootstrap.min.css}" />
	<link rel="stylesheet" th:href="@{/assets/font-awesome/4.2.0/css/font-awesome.min.css}" />
    <link type="text/css" rel="stylesheet" th:href="@{/font/fontawesome/css/all.css}"/>
    <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
    
	<link rel="stylesheet" th:href="@{/assets/fonts/fonts.googleapis.com.css}" />

	<link rel="stylesheet" th:href="@{/assets/css/ace.min.css}" class="ace-main-stylesheet" id="main-ace-style" />
    <link th:href="@{/css/base.css}" rel="stylesheet" />
    <link th:href="@{/css/index.css}" rel="stylesheet" />
    <link th:href="@{/css/responsive.css}" rel="stylesheet" />
   
	<!-- ace settings handler -->
	<script th:src="@{/assets/js/ace-extra.min.js}"></script>
	<script th:src="@{/assets/js/jquery.2.1.1.min.js}"></script>
	
   <title>Thêm mới / Cập nhật</title>
</head>
<body class = "no-skin">
      <div th:replace="fragment-admin::navbar"></div> 
   
      <div class="main-container" id="main-container">
           <script type="text/javascript">
		        try{ace.settings.check('main-container' , 'fixed')}catch(e){}
	       </script>
	       <div th:replace="fragment-admin::sidebar"></div> 
	       <div class="main-content">
		       <div class="main-content-inner">
		            <div class="breadcrumbs" id="breadcrumbs">
						<script type="text/javascript">
							try{ace.settings.check('breadcrumbs' , 'fixed')}catch(e){}
						</script>

						<ul class="breadcrumb">
							<li>
								<i class="ace-icon fa fa-home home-icon"></i>
								<a th:href="@{/freshfood/admin/trang-chu}">Freshfood</a>
							</li>
							<li class="active">Sản phẩm</li>
						</ul><!-- /.breadcrumb -->

						<div class="nav-search" id="nav-search">
							<form class="form-search">
								<span class="input-icon">
									<input type="text" placeholder="Search ..." class="nav-search-input" id="nav-search-input" autocomplete="off" />
									<i class="ace-icon fa fa-search nav-search-icon"></i>
								</span>
							</form>
						</div><!-- /.nav-search -->
				  </div>
				  
				  <div class="mt-4 container text-center py-2" th:if="${product.id == null}">
                       <h3>THÊM MỚI SẢN PHẨM</h3>
                  </div>
                  <div class="mt-4 container text-center py-2" th:if="${product.id != null}">
                       <h3>CẬP NHẬT SẢN PHẨM</h3>
                  </div>
                  <div style="margin-left: 30px; margin-right:30px">
                       <form th:action="@{/freshfood/admin/them-moi}" enctype="multipart/form-data" method="POST" th:object="${product}">
                             <div class="form-group px-5">
                                 <input th:field="*{id}" type="hidden" class="form-control"/>
                                 <label class="mt-2" for="name">Tên sản phẩm: </label>
                                 <input th:field="*{name}" type="text" id="name" class="form-control" placeholder="Tến sản phẩm"/>
                                 <div class="row">
                                     <div class="col-sm-4">
                                         <label class="mt-2" for="main-img">Ảnh chính: </label>
                                         <input name="main-img" type="file" id="main-img" accept="image/png, image/jpeg"/>
                                         <div style="padding: 5px; width: 100px; height: 100px; border: 1px solid grey">
                                             <img id="thumbnail" width=100% />
                                         </div>
                                     </div>
                                     <div class="col-sm-4">
                                          <label class="mt-2" for="ex-img1">Ảnh phụ 1: </label>
                                          <input name="ex-img" type="file" id="ex-img1" accept="image/png, image/jpeg"/>
                                          <div style="padding: 5px; width: 100px; height: 100px; border: 1px solid grey">
                                              <img id="thumbnail0" width=100% />
                                          </div>
                                     </div>
                                     <div class="col-sm-4">
                                         <label class="mt-2" for="ex-img2">Ảnh phụ 2: </label>
                                         <input name="ex-img" type="file" id="ex-img2" accept="image/png, image/jpeg"/>
                                         <div style="padding: 5px; width: 100px; height: 100px; border: 1px solid grey">
                                              <img id="thumbnail1" width=100% />
                                         </div>
                                      </div>
                                 </div>
                         <label class="mt-2" for="price">Giá: </label>
                         <input th:field="*{price}" type="text" id="price" class="form-control" placeholder="Giá"/>
                         <label class="mt-2 mr-2" for="sl">Số lượng: </label>
                         <input th:field="*{quantity}" type="number" min="1" max="100" id="sl"/>
                         <div class="mt-2">
                         <label>Danh mục: </label>
                         <div class="ml-5" th:each="c:${category}">
                              <input type="radio" name="category" th:value="${c.id}"/>
                              <span th:text="${c.name}"></span><br/>
                         </div> 
                   </div>
                   <input th:if="${product.id == null}" class="mt-4 mb-4 btn btn-success" type="submit" value="Thêm mới"/>
                   <input th:if="${product.id != null}" class="mt-4 mb-4 btn btn-success" type="submit" value="Cập nhật"/>
                 </div>
               </form>        
              </div>
				  
		       </div>
		   </div>
      </div>
      
      <script type="text/javascript">
			window.jQuery || document.write("<script src='assets/js/jquery.min.js'>"+"<"+"/script>");
		</script>
		<script type="text/javascript">
			if('ontouchstart' in document.documentElement) document.write("<script src='assets/js/jquery.mobile.custom.min.js'>"+"<"+"/script>");
		</script>
		<script th:src="@{/assets/js/bootstrap.min.js}"></script>
 
		<script th:src="@{/assets/js/jquery-ui.custom.min.js}"></script>
		<script th:src="@{/assets/js/jquery.ui.touch-punch.min.js}"></script>
		<script th:src="@{/assets/js/jquery.easypiechart.min.js}"></script>
		<script th:src="@{/assets/js/jquery.sparkline.min.js}"></script>
		<script th:src="@{/assets/js/jquery.flot.min.js}"></script>
		<script th:src="@{/assets/js/jquery.flot.pie.min.js}"></script>
		<script th:src="@{/assets/js/jquery.flot.resize.min.js}"></script>

		<script th:src="@{/assets/js/ace-elements.min.js}"></script>
		<script th:src="@{/assets/js/ace.min.js}"></script>
		<script>
            $(document).ready(function(){
              var csrfName = "[[${_csrf.headerName}]]";
              var csrfToken = "[[${_csrf.token}]]";
      	      $("#main-img").change(function(){
      		      showMainImg(this);
      	      });
      	      
      	      $("input[name='ex-img']").each(function(index){
      	    	  $(this).change(function(){
      	    		  showExImg(this,index);
      	    	  });
      	      });
      	      
      	      showOldImage();
            });
      	      
         function showMainImg(fileInput){
      	    file = fileInput.files[0];
      	    reader = new FileReader();
      	    reader.onload = function(e){
      		    $("#thumbnail").attr("src", e.target.result);
      	    };
      	
      	    reader.readAsDataURL(file);
         }
         
         function showExImg(fileInput, index){
       	    file = fileInput.files[0];
       	    reader = new FileReader();
       	    reader.onload = function(e){
       		    $("#thumbnail"+index).attr("src", e.target.result);
       	    };
       	
       	    reader.readAsDataURL(file);
          }
         
         function showOldImage(){
        	 if("[[${product}]]" != ""){
        		 $("#thumbnail").attr("src", "[[${product.productImagePath}]]");
        		 $("#thumbnail0").attr("src", "[[${product.productExtraImagePath1}]]");
        		 $("#thumbnail1").attr("src", "[[${product.productExtraImagePath2}]]");
        	     
        	 }
         }
         
      </script>
</body>
</html>